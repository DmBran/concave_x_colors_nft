(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[150],{42560:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/balances",function(){return n(96802)}])},48418:function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var s,l=e[Symbol.iterator]();!(r=(s=l.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(i){a=!0,o=i}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}t.default=void 0;var a,o=(a=n(67294))&&a.__esModule?a:{default:a},s=n(76273),l=n(90387),i=n(57190);var c={};function u(e,t,n,r){if(e&&s.isLocalURL(t)){e.prefetch(t,n,r).catch((function(e){0}));var a=r&&"undefined"!==typeof r.locale?r.locale:e&&e.locale;c[t+"%"+n+(a?"%"+a:"")]=!0}}var f=function(e){var t,n=!1!==e.prefetch,a=l.useRouter(),f=o.default.useMemo((function(){var t=r(s.resolveHref(a,e.href,!0),2),n=t[0],o=t[1];return{href:n,as:e.as?s.resolveHref(a,e.as):o||n}}),[a,e.href,e.as]),d=f.href,p=f.as,h=e.children,x=e.replace,m=e.shallow,b=e.scroll,v=e.locale;"string"===typeof h&&(h=o.default.createElement("a",null,h));var y=(t=o.default.Children.only(h))&&"object"===typeof t&&t.ref,g=r(i.useIntersection({rootMargin:"200px"}),2),w=g[0],j=g[1],k=o.default.useCallback((function(e){w(e),y&&("function"===typeof y?y(e):"object"===typeof y&&(y.current=e))}),[y,w]);o.default.useEffect((function(){var e=j&&n&&s.isLocalURL(d),t="undefined"!==typeof v?v:a&&a.locale,r=c[d+"%"+p+(t?"%"+t:"")];e&&!r&&u(a,d,p,{locale:t})}),[p,d,j,v,n,a]);var N={ref:k,onClick:function(e){t.props&&"function"===typeof t.props.onClick&&t.props.onClick(e),e.defaultPrevented||function(e,t,n,r,a,o,l,i){("A"!==e.currentTarget.nodeName||!function(e){var t=e.currentTarget.target;return t&&"_self"!==t||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)&&s.isLocalURL(n))&&(e.preventDefault(),null==l&&r.indexOf("#")>=0&&(l=!1),t[a?"replace":"push"](n,r,{shallow:o,locale:i,scroll:l}))}(e,a,d,p,x,m,b,v)},onMouseEnter:function(e){s.isLocalURL(d)&&(t.props&&"function"===typeof t.props.onMouseEnter&&t.props.onMouseEnter(e),u(a,d,p,{priority:!0}))}};if(e.passHref||"a"===t.type&&!("href"in t.props)){var C="undefined"!==typeof v?v:a&&a.locale,I=a&&a.isLocaleDomain&&s.getDomainLocale(p,C,a&&a.locales,a&&a.domainLocales);N.href=I||s.addBasePath(s.addLocale(p,C,a&&a.defaultLocale))}return o.default.cloneElement(t,N)};t.default=f},57190:function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var s,l=e[Symbol.iterator]();!(r=(s=l.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(i){a=!0,o=i}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}Object.defineProperty(t,"__esModule",{value:!0}),t.useIntersection=function(e){var t=e.rootMargin,n=e.disabled||!s,i=a.useRef(),c=r(a.useState(!1),2),u=c[0],f=c[1],d=a.useCallback((function(e){i.current&&(i.current(),i.current=void 0),n||u||e&&e.tagName&&(i.current=function(e,t,n){var r=function(e){var t=e.rootMargin||"",n=l.get(t);if(n)return n;var r=new Map,a=new IntersectionObserver((function(e){e.forEach((function(e){var t=r.get(e.target),n=e.isIntersecting||e.intersectionRatio>0;t&&n&&t(n)}))}),e);return l.set(t,n={id:t,observer:a,elements:r}),n}(n),a=r.id,o=r.observer,s=r.elements;return s.set(e,t),o.observe(e),function(){s.delete(e),o.unobserve(e),0===s.size&&(o.disconnect(),l.delete(a))}}(e,(function(e){return e&&f(e)}),{rootMargin:t}))}),[n,t,u]);return a.useEffect((function(){if(!s&&!u){var e=o.requestIdleCallback((function(){return f(!0)}));return function(){return o.cancelIdleCallback(e)}}}),[u]),[d,u]};var a=n(67294),o=n(9311),s="undefined"!==typeof IntersectionObserver;var l=new Map},96802:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return C}});var r=n(85893),a=n(41664),o=n(11163),s=n(28520),l=n.n(s),i=(n(34155),n(67294)),c=n(66010),u=n(21092),f=n(98589),d=n(18256),p=n(47915),h=n(28437),x=n(7868);function m(e,t,n,r,a,o,s){try{var l=e[o](s),i=l.value}catch(c){return void n(c)}l.done?t(i):Promise.resolve(i).then(r,a)}function b(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function s(e){m(o,r,a,s,l,"next",e)}function l(e){m(o,r,a,s,l,"throw",e)}s(void 0)}))}}function v(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var y=function(e){var t=function(){return C.filter((function(e){return e.selected})).length},n=function(){return C.filter((function(e){return!(!e.updatedRentalCost||e.rentalCost===e.updatedRentalCost)}))},a=function(){return C.filter((function(e){return e.claiming})).length>0},o=function(e){if(e.selected)return delete e.selected,void I(v(C));e.selected=1,I(v(C))},s=function(){return C.filter((function(e){return e.selected})).map((function(e){return parseInt(e.tokenId)}))},m=(0,u.useWeb3Context)(),y=Number("1"),g="0x9fdb31F8CE3cB8400C7cCb2299492F2A498330a4",w="0xb68B5cEdeFC2668a04D46926fD94fDae9fc143CC",j="10",k="0.005",N=(0,i.useState)([]),C=N[0],I=N[1],R=(0,i.useState)(0),E=R[0],M=R[1],A=(0,i.useState)(!1),S=A[0],P=A[1],T=(0,i.useState)(!1),_=T[0],L=T[1],B=(0,i.useState)("0.003"),W=B[0],F=B[1];function H(){return(H=b(l().mark((function e(t){var n,r,a,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.tokenId,t.claiming=1,P(n),r=new m.library.eth.Contract(f.Mt,w),e.next=6,r.methods.claim(g,[n]);case 6:return a=e.sent,e.next=9,(0,p.p)(m.library,{data:a.encodeABI(),to:w,cost:"0",count:1,from:m.account});case 9:if(s=e.sent,P(!1),delete t.claiming,null===s||void 0===s?void 0:s.transactionHash){e.next=15;break}return I(v(C)),e.abrupt("return");case 15:return M(void 0),C.map((function(e){return e.tokenId===n&&(e.accruals=0,e.selected&&o(e)),e})),I(v(C)),e.next=20,K(m.account);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return(U=b(l().mark((function e(){var t,r,a,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=new m.library.eth.Contract(f.Mt,w),P("fees"),(r=n()).length){e.next=7;break}return P(!1),c.ZP.error("No rental fees changed"),e.abrupt("return");case 7:return console.log([r.map((function(e){return parseInt(e.tokenId)})),r.map((function(e){return m.library.utils.toWei(e.updatedRentalCost,"ether")}))]),e.next=10,t.methods.updateRentalFees(g,r.map((function(e){return parseInt(e.tokenId)})),r.map((function(e){return m.library.utils.toWei(e.updatedRentalCost,"ether")})));case 10:return a=e.sent,e.next=13,(0,p.p)(m.library,{data:a.encodeABI(),to:w,cost:"0",count:1,from:m.account});case 13:if(o=e.sent,P(!1),null===o||void 0===o?void 0:o.transactionHash){e.next=17;break}return e.abrupt("return");case 17:r.map((function(e){e.rentalCost=e.updatedRentalCost})),I(v(C));case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return(O=b(l().mark((function e(){var t,n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=E){e.next=2;break}return e.abrupt("return",c.ZP.error("Nothing to claim!"));case 2:return P("all"),t=new m.library.eth.Contract(f.Mt,w),e.next=6,t.methods.claimAllContract(g);case 6:return n=e.sent,e.next=9,(0,p.p)(m.library,{data:n.encodeABI(),to:w,cost:"0",from:m.account,count:1});case 9:if(r=e.sent,P(!1),null===r||void 0===r?void 0:r.transactionHash){e.next=13;break}return e.abrupt("return");case 13:M(0),C.map((function(e){return e.accruals=0,e})),I(v(C));case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(){return Z.apply(this,arguments)}function Z(){return(Z=b(l().mark((function e(){var t,n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new m.library.eth.Contract(f.Mt,w),e.next=3,t.methods.minimumFlashFee(g).call();case 3:n=e.sent,r=m.library.utils.fromWei(n,"ether"),console.log(r),F(r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(e){return q.apply(this,arguments)}function q(){return(q=b(l().mark((function e(t){var n,r,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new m.library.eth.Contract(f.Mt,w),e.next=3,n.methods.getAccruals(t).call();case 3:return r=e.sent,a=m.library.utils.fromWei(r.toString(),"ether"),M(a),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(){return z.apply(this,arguments)}function z(){return(z=b(l().mark((function e(){var t,n,r,a,o,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n=new m.library.eth.Contract(f.Mt,w),e.next=4,n.methods.getStakedByAddress(g,m.account).call();case 4:if(r=e.sent,console.log(r),r.length){e.next=9;break}return L(!0),e.abrupt("return");case 9:a=0;case 10:if(!(a<r.length)){e.next=19;break}return o=r[a],e.next=14,(0,d.Xv)(o,m);case 14:s=e.sent,t.push({tokenId:o,color:s});case 16:++a,e.next=10;break;case 19:return I(t),L(!0),e.next=23,Y(t);case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(){return(V=b(l().mark((function e(n){var r,a,i,u,d;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t()){e.next=3;break}return c.ZP.error("No colors selected"),e.abrupt("return");case 3:return P("unstake"),r=s(),console.log(r),a=new m.library.eth.Contract(f.Mt,w),i=a.methods.removeStaked(g,r,!!n),e.next=10,(0,p.p)(m.library,{data:i.encodeABI(),to:w,cost:"0",from:m.account,count:1});case 10:if(u=e.sent,P(void 0),null===u||void 0===u?void 0:u.transactionHash){e.next=14;break}return e.abrupt("return");case 14:if(null===u||void 0===u?void 0:u.transactionHash){e.next=16;break}return e.abrupt("return");case 16:return M(void 0),d=C.map((function(e){return r.includes(parseInt(e.tokenId))&&(e.accruals=0,o(e)),e})).filter((function(e){return!r.includes(parseInt(e.tokenId))})),I(d),e.next=21,K(m.account);case 21:return e.abrupt("return");case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e){return $.apply(this,arguments)}function $(){return($=b(l().mark((function e(t){var n,r,a,o,s,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new m.library.eth.Contract(f.Mt,w),e.next=3,n.methods.stakedNFTData(g,t.map((function(e){return Number(e.tokenId)}))).call();case 3:for(r=e.sent,a=0;a<t.length;++a)o=t[a],s=r[a],o.accruals=m.library.utils.fromWei(s.accruals.toString(),"ether"),o.rentalCost=m.library.utils.fromWei(s.rentalFee.toString(),"ether"),o.royalties=m.library.utils.fromWei((null!==(i=s.allTimeAccruals)&&void 0!==i?i:0).toString(),"ether"),o.rentals=s.allTimeLends;I(v(t));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}if((0,i.useEffect)(b(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!m.active||m.networkId!==y){e.next=7;break}return e.next=3,D();case 3:return e.next=5,X();case 5:return e.next=7,K(m.account);case 7:case"end":return e.stop()}}),e)}))),[m]),m.active){if(m.networkId!==y)return(0,r.jsx)("div",{className:"flex-1 font-bold text-red flex text-center center-content justify-center",children:(0,r.jsx)("p",{className:"font-bold title-font uppercase text-4xl",children:"Please switch network to Ethereum mainnet"})});var G,J;if(m.account)return(0,r.jsx)("div",{className:"w-full mx-auto lg:w-5/6 rounded pb-10 px-2 lg:px-0",children:(0,r.jsxs)("div",{className:"mb-10 ",children:[(0,r.jsx)("p",{className:"text-center mb-10 text-xl font-bold title-font sm:text-4xl text-3xl mb-4 font-black text-gray-900 pt-0 mt-0 uppercase",children:"CURRENT ROYALTIES"}),(0,r.jsxs)("p",{className:"text-center mb-10 font-bold text-4xl title-font mb-4 font-black text-gray-900 pt-0 mt-0 uppercase",children:["undefined"!==typeof E?E:"--"," ",(0,r.jsx)("span",{style:{top:"2px"},className:"inline-block align-top relative",children:(0,r.jsx)(h.k,{width:20})}),(0,r.jsx)("button",{onClick:S||a()?function(){}:function(){return function(){return O.apply(this,arguments)}()},className:"align-top text-sm mx-5  text-white font-bold py-2 px-4 rounded ".concat(!(E&&E>0)||S&&"all"!==S||a()?"bg-gray-500 bg-opacity-50":"bg-blue-700 hover:bg-green-700"),children:"all"===S?"Claiming...":"Claim All Royalties"})]}),(0,r.jsxs)("div",{className:"flex w-full content-center justify-center mt-20 mb-10",children:[_&&(0,r.jsx)("div",{className:" w-full text-center",children:(0,r.jsx)("button",{onClick:S||a()?function(){}:function(){return function(e){return V.apply(this,arguments)}(!0)},className:"w-2/3 mx-5 text-white font-bold py-2 px-4 rounded ".concat(0===t()||S&&"unstake"!==S||a()?"opacity-60 bg-gray-500":"bg-green-700 hover:bg-blue-700"),children:"unstake"===S?"Submitting...":E>0?"Unstake and Claim Selected Royalties":"Unstake Tokens"})}),_&&(0,r.jsx)("div",{className:" w-full text-center ",children:(0,r.jsx)("button",{onClick:S||a()?function(){}:function(){return function(){return U.apply(this,arguments)}()},className:"w-2/3 mx-5 text-white font-bold py-2 px-4 rounded ".concat(0===function(){var e=n();return console.log(e.length),e.length}()||S&&"fees"!==S||a()?"opacity-60 bg-gray-500":"bg-blue-700 hover:bg-green-700"),children:"fees"===S?"Submitting...":"Update Rental Fees"})})]}),(0,r.jsxs)("div",{className:"colors justify-center flex flex-wrap content-center",children:[_&&C&&C.sort((function(e,t){return Number(e.tokenId)-Number(t.tokenId)})).map((function(e){return(0,r.jsxs)("div",{onClick:function(){return o(e)},className:" mx-5 px-4 py-4  mb-7 border-solid border-2 "+(1==e.selected?"border-blue-700 border-4":"border-slate-600"),children:[(0,r.jsx)("div",{className:"border-solid mb-2 border-4 border-gray-800 opacity-85  color shadow-lg",style:{width:150,height:150,background:e.color,cursor:"pointer"}}),(0,r.jsxs)("div",{className:"items-center justify-center justify-content",children:[(0,r.jsxs)("div",{className:"stat flex flex-row",children:[(0,r.jsx)("p",{className:"w-1/2 font-bold justify-self-start",children:"Token ID:"}),(0,r.jsx)("p",{className:"w-1/2 align-right text-right font-bold justify-self-end",children:e.tokenId})]}),(0,r.jsxs)("div",{className:"stat flex flex-row",children:[(0,r.jsx)("p",{className:"w-1/2 font-bold justify-self-start",children:"Color:"}),(0,r.jsx)("p",{className:"w-1/2 align-right text-right font-bold justify-self-end",children:e.color.toUpperCase()})]}),(0,r.jsxs)("div",{className:"stat flex flex-row pb-2",children:[(0,r.jsx)("p",{className:"w-1/2 font-bold justify-self-start",children:"Fee:"}),(0,r.jsx)("p",{className:"ml-auto align-right text-right font-bold justify-self-end",children:(0,r.jsxs)("label",{className:" ml-auto w-full justify-self-end rounded flex text-center center-text ",children:[(0,r.jsx)("input",{onClick:function(e){e.stopPropagation()},onChange:function(t){console.log(t.target.value),e.updatedRentalCost=t.target.value,I(v(C))},onBlur:function(t){!function(e){var t=e.updatedRentalCost;if(t){if(isNaN(Number(t)))return e.updatedRentalCost=k,I(v(C)),c.ZP.error("Valid rental fee required");if(/\.\d\d\d\d\d/.test(t))return e.updatedRentalCost=k,I(v(C)),c.ZP.error("Max precision reached");var n=m.library.utils.toBN(m.library.utils.toWei(t.toString(),"ether")),r=m.library.utils.toBN(m.library.utils.toWei(W,"ether")),a=m.library.utils.toBN(m.library.utils.toWei(j,"ether"));n.lt(r)?(e.updatedRentalCost=k,I(v(C)),c.ZP.error("Minimum rental fee is 0.003 ETH")):n.gt(a)&&(e.updatedRentalCost=k,I(v(C)),c.ZP.error("Maximum rental fee is 10 ETH"))}}(e)},type:"text",style:{width:"75px"},className:"text-right inline-block py-1 pl-2 underline appearance-none text-black",value:null!==(G=e.updatedRentalCost)&&void 0!==G?G:e.rentalCost}),(0,r.jsx)("span",{style:{top:"10px"},className:"ml-1 relative inline-block",children:(0,r.jsx)(h.k,{width:8})})]})})]}),(0,r.jsxs)("div",{className:"stat flex flex-row  border-t border-slate-200 pt-3",children:[(0,r.jsx)("p",{className:"w-1/2 font-bold justify-self-start",children:"Rentals:"}),(0,r.jsx)("p",{className:"w-1/2 align-right text-right font-bold justify-self-end",children:null!==(J=e.rentals)&&void 0!==J?J:0})]}),(0,r.jsxs)("div",{className:" stat flex flex-row",children:[(0,r.jsx)("p",{className:"w-1/2 font-bold justify-self-start",children:"Claimable:"}),(0,r.jsxs)("p",{className:"w-1/2 align-right text-right font-bold justify-self-end",children:[(0,r.jsx)("span",{style:{top:"4px",right:"3px"},className:"ml-2 inline-block align-top relative",children:(0,r.jsx)(h.k,{width:9})}),e.accruals]})]}),(0,r.jsxs)("div",{className:"stat flex flex-row",children:[(0,r.jsx)("p",{className:"w-1/2 font-bold justify-self-start",children:"Total:"}),(0,r.jsxs)("p",{className:"w-1/2 align-right text-right font-bold justify-self-end",children:[(0,r.jsx)("span",{style:{top:"4px",right:"3px"},className:"ml-2 inline-block align-top relative",children:(0,r.jsx)(h.k,{width:9})}),e.royalties]})]}),(0,r.jsx)("div",{className:"stat",children:(0,r.jsx)("button",{onClick:function(t){t.stopPropagation(),function(e){H.apply(this,arguments)}(e)},className:" text-sm w-full mt-2 text-white font-bold py-2 px-4 rounded ".concat(e.accruals>0?"bg-blue-700 hover:bg-green-700":"bg-gray-500 bg-opacity-50"),children:e.claiming?"Claiming...":"Claim Royalty"})})]})]},e.color)})),!_&&(0,r.jsx)("div",{className:"mt-5",children:(0,r.jsx)(x.a,{})}),_&&!C.length&&(0,r.jsx)("div",{children:(0,r.jsx)("p",{className:"text-red-500 font-bold mb-10 uppercase text-lg",children:"No staked colors"})})]})]})})}return(0,r.jsx)("div",{className:"flex-1 flex center-content justify-center",children:(0,r.jsx)("p",{className:"font-bold title-font uppercase text-4xl",children:"Please Connect via MetaMask"})})},g=n(6151),w=n(55480),j=n(61127),k=n(40108),N=n.n(k);function C(){(0,o.useRouter)().query;return(0,r.jsx)("div",{className:"relative",children:(0,r.jsxs)("div",{className:N().mainContainer,children:[(0,r.jsx)(w.w,{}),(0,r.jsx)(j.w,{}),(0,r.jsxs)("div",{className:N().container,children:[(0,r.jsx)("div",{className:N().main,children:(0,r.jsxs)("main",{className:"relative container mx-auto",children:[(0,r.jsx)("div",{className:"text-left align-left ",children:(0,r.jsxs)("nav",{className:"border-gray-800 border-b-0 justify-start flex flex-row",children:[(0,r.jsx)(a.default,{prefetch:!1,href:"/stake",children:(0,r.jsx)("button",{className:"".concat(N().menuItem),children:"Stake Colors"})}),(0,r.jsx)(a.default,{prefetch:!1,href:"/balances",children:(0,r.jsx)("button",{className:"".concat(N().menuItem," ").concat(N().menuActive),children:"Unstake & Claim Royalties"})})]})}),(0,r.jsx)("div",{className:"bg-white  border-gray-800 border-8 relative container mx-auto flex px-5 py-6 lg:py-24 md:flex-row flex-col items-center",children:(0,r.jsx)(y,{})})]})}),(0,r.jsx)(g.$,{})]})]})})}},9008:function(e,t,n){e.exports=n(5443)},41664:function(e,t,n){e.exports=n(48418)},11163:function(e,t,n){e.exports=n(90387)}},function(e){e.O(0,[47,775,774,888,179],(function(){return t=42560,e(e.s=t);var t}));var t=e.O();_N_E=t}]);