(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[687],{51553:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/mint",function(){return n(86035)}])},86035:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return j}});var a=n(85893),r=n(40108),i=n.n(r),s=n(61127),o=n(6151),u=n(55480),l=n(28520),c=n.n(l),p=n(8271),d=JSON.parse('{"Mt":[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"approved","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":false,"internalType":"bool","name":"approved","type":"bool"}],"name":"ApprovalForAll","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[],"name":"MAX_COLORS","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"PROVENANCE_HASH","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"approve","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint32","name":"","type":"uint32"}],"name":"existingHexColors","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getApproved","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getBase64TokenSVG","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getBlue","outputs":[{"internalType":"uint32","name":"","type":"uint32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getGreen","outputs":[{"internalType":"uint32","name":"","type":"uint32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getHexColor","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getRGB","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getRed","outputs":[{"internalType":"uint32","name":"","type":"uint32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getTokenMetadata","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getTokenSVG","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"operator","type":"address"}],"name":"isApprovedForAll","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"numberOfTokens","type":"uint256"}],"name":"mintNextColors","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ownerOf","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"bytes","name":"_data","type":"bytes"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"bool","name":"approved","type":"bool"}],"name":"setApprovalForAll","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"provenanceHash","type":"string"}],"name":"setProvenanceHash","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"index","type":"uint256"}],"name":"tokenByIndex","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"uint256","name":"index","type":"uint256"}],"name":"tokenOfOwnerByIndex","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"tokenURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"transferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"number","type":"uint256"}],"name":"uintToHexString","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"pure","type":"function"}]}'),y=n(67294),m=n(7868),f=n(66010),b=n(11163),x=n(21092);function h(e,t,n,a,r,i,s){try{var o=e[i](s),u=o.value}catch(l){return void n(l)}o.done?t(u):Promise.resolve(u).then(a,r)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){h(i,a,r,s,o,"next",e)}function o(e){h(i,a,r,s,o,"throw",e)}s(void 0)}))}}var T=function(){var e=(0,x.useWeb3Context)(),t=2,n="0x3C4CfA9540c7aeacBbB81532Eb99D5E870105CA9",r="0x2ED6550746891875A7e39d3747d1a4FFe5433289",s=(0,y.useState)(null),o=s[0],u=s[1],l=(0,y.useState)(null),h=(l[0],l[1]),T=(0,y.useState)(null),w=T[0],g=T[1],k=(0,y.useState)(null),j=k[0],M=k[1],I=(0,y.useState)(null),N=I[0],C=I[1];function P(e,t){return A.apply(this,arguments)}function A(){return(A=v(c().mark((function t(n,a){var r,i,s,o,l;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=[],t.next=3,n.methods.balanceOf(a).call();case 3:i=t.sent,C(i),s=0;case 6:if(!(s<i)){t.next=17;break}return t.next=9,n.methods.tokenOfOwnerByIndex(a,e.library.eth.abi.encodeParameter("uint256",s)).call();case 9:return o=t.sent,t.next=12,n.methods.getHexColor(e.library.eth.abi.encodeParameter("uint256",o)).call();case 12:l=t.sent,r.push({tokenId:o,color:l});case 14:++s,t.next=6;break;case 17:u(r);case 18:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function S(){return(S=v(c().mark((function t(){var n,a,i,s,u,l,d,y;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return M("spirals"),t.prev=2,t.next=5,e.library.eth.getTransactionCount(w,"latest");case 5:return a=t.sent,i=new e.library.eth.Contract(p.Mt,r),s=o.filter((function(e){return e.selected})).map((function(e){return parseInt(e.tokenId)})),u=i.methods.mintSync(s),t.next=11,e.library.eth.estimateGas({from:w,to:r,data:u.encodeABI()});case 11:return l=t.sent,d={from:w,to:r,nonce:a,data:u.encodeABI(),gas:l},n=f.ZP.loading("Transaction processing"),t.next=16,e.library.eth.sendTransaction(d,w).catch((function(e){f.ZP.error("Transaction failed!",{id:n}),M(void 0)}));case 16:if(y=t.sent,console.log(y),null===y||void 0===y?void 0:y.transactionHash){t.next=22;break}f.ZP.error("Transaction failed!",{id:n}),M(void 0),t.next=24;break;case 22:return f.ZP.success("Transaction successful!",{id:n}),t.abrupt("return",b.default.push("/nfts"));case 24:t.next=31;break;case 26:t.prev=26,t.t0=t.catch(2),console.log(t.t0),M(void 0),n&&f.ZP.error("Transaction failed!",{id:n});case 31:case"end":return t.stop()}}),t,null,[[2,26]])})))).apply(this,arguments)}function O(){return(O=v(c().mark((function t(){var a,r,i,s,o,u,l;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.library.eth.getTransactionCount(w,"latest");case 2:return a=t.sent,r=new e.library.eth.Contract(d.Mt,n),i=r.methods.mintNextColors(e.library.eth.abi.encodeParameter("uint256",1)),t.next=7,e.library.eth.estimateGas({from:w,to:n,data:i.encodeABI()});case 7:return s=t.sent,console.log("Gas: ".concat(s)),o={from:w,to:n,nonce:a,data:i.encodeABI(),gas:s},u=f.ZP.loading("Transaction processing"),t.next=13,e.library.eth.sendTransaction(o,w).catch((function(e){console.log(e),f.ZP.error("Transaction failed!",{id:u}),M(void 0)}));case 13:if(l=t.sent,console.log(l),!(null===l||void 0===l?void 0:l.transactionHash)){t.next=20;break}return f.ZP.success("Transaction successful!",{id:u}),M(void 0),t.next=20,P(r,w);case 20:case"end":return t.stop()}}),t)})))).apply(this,arguments)}if((0,y.useEffect)(v(c().mark((function t(){var a;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(h(0),u([]),!e.active){t.next=7;break}return g(e.account),a=new e.library.eth.Contract(d.Mt,n),t.next=7,P(a,e.account);case 7:case"end":return t.stop()}}),t)}))),[e]),e.active){if(3!==e.networkId)return(0,a.jsx)("div",{className:"flex-1 font-bold text-red flex text-center center-content justify-center",children:(0,a.jsx)("p",{className:"mb-0 align-center",children:"Please switch network to Ethereum mainnet"})});if(e.account)return(0,a.jsxs)("div",{className:i().modal,children:[(0,a.jsxs)("div",{className:"mb-10",children:[(0,a.jsx)("p",{className:"text-center mb-3 font-bold",children:"Need a Color Primitive?"}),(0,a.jsxs)("div",{className:"flex colors justify-center content-center",children:["colors"!=j&&(0,a.jsx)("button",{onClick:function(){return O.apply(this,arguments)},className:"bg-blue-500 mx-5 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Mint a Colors NFT!"}),"colors"==j&&(0,a.jsx)("button",{className:"bg-green-500 mx-5 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Minting..."})]})]}),N>0&&(0,a.jsxs)("div",{className:"mb-10",children:[(0,a.jsx)("p",{className:"text-center mb-3 text-xl font-bold",children:"Select Your Color Primitives"}),(0,a.jsxs)("div",{className:"flex flex-wrap colors justify-center content-center",children:[o&&o.map((function(e){return(0,a.jsx)("div",{onClick:function(){return function(e){if(e.selected)return delete e.selected,void h("unselected"+e.tokenId);o.filter((function(e){return e.selected})).length!==t?(e.selected=1,h(e.tokenId)):f.ZP.error("Max number of colors selected!")}(e)},className:"border-solid  border-4 color shadow-lg "+(e.selected?i().colorActive:" border-white"),style:{width:75,height:75,background:e.color,margin:5}},e.color)})),!o.length&&(0,a.jsx)(m.a,{})]})]}),(0,a.jsxs)("div",{className:"content-center justify-center flex mb-10",children:["spirals"!=j&&(0,a.jsx)("button",{onClick:function(){return S.apply(this,arguments)},className:"bg-green-500 mx-5 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"MINT!"}),"spirals"==j&&(0,a.jsx)("button",{className:"bg-green-500 mx-5 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Minting..."})]})]})}return(0,a.jsx)("div",{className:"flex-1 flex center-content justify-center",children:(0,a.jsx)("p",{className:"font-bold",children:"Please Connect via MetaMask"})})};function w(e,t,n,a,r,i,s){try{var o=e[i](s),u=o.value}catch(l){return void n(l)}o.done?t(u):Promise.resolve(u).then(a,r)}function g(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){w(i,a,r,s,o,"next",e)}function o(e){w(i,a,r,s,o,"throw",e)}s(void 0)}))}}var k=function(e){console.log(e);var t=(0,x.useWeb3Context)(),n=2,r="0x3C4CfA9540c7aeacBbB81532Eb99D5E870105CA9",s="0x2ED6550746891875A7e39d3747d1a4FFe5433289",o=(0,y.useState)(null),u=o[0],l=o[1],h=(0,y.useState)(null),v=h[0],T=h[1],w=(0,y.useState)(null),k=(w[0],w[1]),j=(0,y.useState)(null),M=j[0],I=j[1],N=(0,y.useState)(null),C=N[0],P=N[1],A=(0,y.useState)(null),S=(A[0],A[1]);function O(e,t){return E.apply(this,arguments)}function E(){return(E=g(c().mark((function e(n,a){var r,i,s,o,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],e.next=3,n.methods.balanceOf(a).call();case 3:i=e.sent,S(i),s=0;case 6:if(!(s<i)){e.next=17;break}return e.next=9,n.methods.tokenOfOwnerByIndex(a,t.library.eth.abi.encodeParameter("uint256",s)).call();case 9:return o=e.sent,e.next=12,n.methods.getHexColor(t.library.eth.abi.encodeParameter("uint256",o)).call();case 12:u=e.sent,r.push({tokenId:o,color:u});case 14:++s,e.next=6;break;case 17:l(r);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e,t){return _.apply(this,arguments)}function _(){return(_=g(c().mark((function e(n,a){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.methods.getTokenSVG(t.library.eth.abi.encodeParameter("uint256",a)).call();case 2:r=e.sent,T(r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(){return(Z=g(c().mark((function n(){var a,r,i,o,l,d,y,m;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return P("spirals"),n.prev=2,n.next=5,t.library.eth.getTransactionCount(M,"latest");case 5:return r=n.sent,i=new t.library.eth.Contract(p.Mt,s),o=u.filter((function(e){return e.selected})).map((function(e){return parseInt(e.tokenId)})),l=i.methods.updateColors(e.tokenID,o),n.next=11,t.library.eth.estimateGas({from:M,to:s,data:l.encodeABI()});case 11:return d=n.sent,y={from:M,to:s,nonce:r,data:l.encodeABI(),gas:d},a=f.ZP.loading("Transaction processing"),n.next=16,t.library.eth.sendTransaction(y,M).catch((function(e){f.ZP.error("Transaction failed!",{id:a}),P(void 0)}));case 16:if(m=n.sent,console.log(m),null===m||void 0===m?void 0:m.transactionHash){n.next=22;break}f.ZP.error("Transaction failed!",{id:a}),P(void 0),n.next=24;break;case 22:return f.ZP.success("Transaction successful!",{id:a}),n.abrupt("return",b.default.push("/reveal?tokenID=".concat(e.tokenID)));case 24:n.next=31;break;case 26:n.prev=26,n.t0=n.catch(2),console.log(n.t0),P(void 0),a&&f.ZP.error("Transaction failed!",{id:a});case 31:case"end":return n.stop()}}),n,null,[[2,26]])})))).apply(this,arguments)}if((0,y.useEffect)(g(c().mark((function n(){var a,i;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(k(0),l([]),!t.active){n.next=10;break}return I(t.account),a=new t.library.eth.Contract(p.Mt,s),n.next=7,B(a,e.tokenID);case 7:return i=new t.library.eth.Contract(d.Mt,r),n.next=10,O(i,t.account);case 10:case"end":return n.stop()}}),n)}))),[t]),t.active){if(3!==t.networkId)return(0,a.jsx)("div",{className:"flex-1 font-bold text-red flex text-center center-content justify-center",children:(0,a.jsx)("p",{className:"mb-0 align-center",children:"Please switch network to Ethereum mainnet"})});if(t.account)return(0,a.jsxs)("div",{className:i().modal,children:[(0,a.jsxs)("div",{className:"mb-10",children:[(0,a.jsx)("p",{className:"text-center mb-3 text-xl font-bold",children:"Sync X Color"}),(0,a.jsxs)("div",{className:"flex colors justify-center content-center",children:[!v&&(0,a.jsx)(m.a,{}),v&&(0,a.jsx)("div",{className:i().sync,dangerouslySetInnerHTML:{__html:v}})]})]}),(0,a.jsxs)("div",{className:"mb-10",children:[(0,a.jsx)("p",{className:"text-center mb-3 text-xl font-bold",children:"Select Your Color Primitives"}),(0,a.jsxs)("div",{className:"flex flex-wrap colors justify-center content-center",children:[u&&u.map((function(e){return(0,a.jsx)("div",{onClick:function(){return function(e){if(e.selected)return delete e.selected,void k("unselected"+e.tokenId);u.filter((function(e){return e.selected})).length!==n?(e.selected=1,k(e.tokenId)):f.ZP.error("Max number of colors selected!")}(e)},className:"border-solid  border-4 color shadow-lg "+(e.selected?i().colorActive:" border-white"),style:{width:75,height:75,background:e.color,margin:5}},e.color)})),(!u||!u.length)&&(0,a.jsx)(m.a,{})]})]}),(0,a.jsxs)("div",{className:"content-center justify-center flex mb-10",children:["spirals"!=C&&(0,a.jsx)("button",{onClick:function(){return Z.apply(this,arguments)},className:"bg-green-500 mx-5 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"REMINT!"}),"spirals"==C&&(0,a.jsx)("button",{className:"bg-green-500 mx-5 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Reminting..."})]})]})}return(0,a.jsx)("div",{className:"flex-1 flex center-content justify-center",children:(0,a.jsx)("p",{className:"font-bold",children:"Please Connect via MetaMask"})})};function j(){var e=(0,b.useRouter)().query;return(0,a.jsx)("div",{className:"relative",children:(0,a.jsxs)("div",{className:i().mainContainer,children:[(0,a.jsx)(u.w,{}),(0,a.jsx)(s.w,{}),(0,a.jsxs)("div",{className:i().container,children:[(0,a.jsx)("div",{className:i().main,children:(0,a.jsx)("main",{className:i().modal,children:e.tokenID?(0,a.jsx)(k,{tokenID:e.tokenID}):(0,a.jsx)(T,{})})}),(0,a.jsx)(o.$,{})]})]})})}},11163:function(e,t,n){e.exports=n(90387)}},function(e){e.O(0,[47,39,774,888,179],(function(){return t=51553,e(e.s=t);var t}));var t=e.O();_N_E=t}]);