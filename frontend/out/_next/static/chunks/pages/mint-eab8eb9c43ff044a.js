(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[687],{51553:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/mint",function(){return t(71893)}])},71893:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return y}});var r=t(85893),s=t(40108),a=t.n(s),o=t(61127),c=t(6151),i=t(55480),l=t(28520),u=t.n(l),d=t(8271),f=(t(69672),t(67143)),x=t(67294),h=t(7868),m=t(66010),b=t(11163),p=t(21092);function v(e,n,t,r,s,a,o){try{var c=e[a](o),i=c.value}catch(l){return void t(l)}c.done?n(i):Promise.resolve(i).then(r,s)}function g(e){return function(){var n=this,t=arguments;return new Promise((function(r,s){var a=e.apply(n,t);function o(e){v(a,r,s,o,c,"next",e)}function c(e){v(a,r,s,o,c,"throw",e)}o(void 0)}))}}var w=function(){var e=(0,p.useWeb3Context)(),n=2,t="0x3C4CfA9540c7aeacBbB81532Eb99D5E870105CA9",s="0x2ED6550746891875A7e39d3747d1a4FFe5433289",o=(0,x.useState)(null),c=o[0],i=o[1],l=(0,x.useState)(null),v=(l[0],l[1]),w=(0,x.useState)(null),y=w[0],j=w[1],N=(0,x.useState)(null),k=(N[0],N[1],(0,x.useState)(null)),C=k[0],P=k[1],T=(0,x.useState)(null),I=T[0],_=T[1];function E(e,n){return M.apply(this,arguments)}function M(){return(M=g(u().mark((function n(t,r){var s,a,o,c,l,d;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=[],n.next=3,t.methods.balanceOf(r).call();case 3:a=n.sent,_(a),o=0;case 6:if(!(o<a)){n.next=20;break}return n.next=9,t.methods.tokenOfOwnerByIndex(r,e.library.eth.abi.encodeParameter("uint256",o)).call();case 9:return c=n.sent,n.next=12,t.methods.getTokenSVG(e.library.eth.abi.encodeParameter("uint256",c)).call();case 12:return l=n.sent,n.next=15,t.methods.getHexColor(e.library.eth.abi.encodeParameter("uint256",c)).call();case 15:d=n.sent,s.push({svg:l.replace(/"690"/g,"75","g"),tokenId:c,color:d});case 17:++o,n.next=6;break;case 20:console.log(s),i(s);case 22:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function S(){return(S=g(u().mark((function n(){var t,r,a,o,i,l,f,x;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return P("spirals"),n.prev=2,n.next=5,e.library.eth.getTransactionCount(y,"latest");case 5:return r=n.sent,a=new e.library.eth.Contract(d.Mt,s),o=c.filter((function(e){return e.selected})).map((function(e){return parseInt(e.tokenId)})),i=a.methods.mintSync(o),n.next=11,e.library.eth.estimateGas({from:y,to:s,data:i.encodeABI()});case 11:return l=n.sent,console.log(o),console.log(a.methods.mintSync(e.library.eth.abi.encodeParameter("uint256[]",o))),f={from:y,to:s,nonce:r,data:i.encodeABI(),gas:l},t=m.ZP.loading("Transaction processing"),n.next=18,e.library.eth.sendTransaction(f,y).catch((function(e){m.ZP.error("Transaction failed!",{id:t}),P(void 0)}));case 18:x=n.sent,console.log(x),(null===x||void 0===x?void 0:x.code)?(m.ZP.error("Transaction failed!",{id:t}),P(void 0)):m.ZP.success("Transaction successful!",{id:t}),P(void 0),b.default.push("/nfts"),n.next=30;break;case 25:n.prev=25,n.t0=n.catch(2),console.log(n.t0),P(void 0),t&&m.ZP.error("Transaction failed!",{id:t});case 30:case"end":return n.stop()}}),n,null,[[2,25]])})))).apply(this,arguments)}(0,x.useEffect)(g(u().mark((function n(){var r;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return v(0),i([]),n.next=4,e.setFirstValidConnector(["MetaMask"]);case 4:if(!e.active){n.next=9;break}return j(e.account),r=new e.library.eth.Contract(f.Mt,t),n.next=9,E(r,e.account);case 9:case"end":return n.stop()}}),n)}))),[]);var Z=g(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.ethereum){e.next=3;break}return e.next=3,window.ethereum.enable();case 3:case"end":return e.stop()}}),e)})));function A(){return(A=g(u().mark((function n(){var r,s,a,o,c,i,l;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.library.eth.getTransactionCount(y,"latest");case 2:return r=n.sent,s=new e.library.eth.Contract(f.Mt,t),a=s.methods.mintNextColors(e.library.eth.abi.encodeParameter("uint256",1)),n.next=7,e.library.eth.estimateGas({from:y,to:t,data:a.encodeABI()});case 7:return o=n.sent,console.log("Gas: ".concat(o)),c={from:y,to:t,nonce:r,data:a.encodeABI(),gas:o},console.log(c),i=m.ZP.loading("Transaction processing"),n.next=14,e.library.eth.sendTransaction(c,y).catch((function(e){console.log(e),m.ZP.error("Transaction failed!",{id:i}),P(void 0)}));case 14:if(l=n.sent,console.log(l),!(null===l||void 0===l?void 0:l.transactionHash)){n.next=21;break}return m.ZP.success("Transaction successful!",{id:i}),P(void 0),n.next=21,E(s,y);case 21:console.log(l);case 22:case"end":return n.stop()}}),n)})))).apply(this,arguments)}if(e.active){if(3!==e.networkId)return(0,r.jsx)("div",{className:"flex-1 font-bold text-red flex text-center center-content justify-center",children:(0,r.jsx)("p",{className:"mb-0 align-center",children:"Please switch network to Ethereum mainnet"})});if(e.account)return(0,r.jsxs)("div",{className:a().modal,children:[(0,r.jsxs)("div",{className:"mb-10",children:[(0,r.jsx)("p",{className:"text-center mb-3 font-bold",children:"Need a Color Primitive?"}),(0,r.jsxs)("div",{className:"flex colors justify-center content-center",children:["colors"!=C&&(0,r.jsx)("button",{onClick:function(){return A.apply(this,arguments)},className:"bg-blue-500 mx-5 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Mint a Colors NFT!"}),"colors"==C&&(0,r.jsx)("button",{className:"bg-green-500 mx-5 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Minting..."})]})]}),I>0&&(0,r.jsxs)("div",{className:"mb-10",children:[(0,r.jsx)("p",{className:"text-center mb-3 text-xl font-bold",children:"Select your Color Primitives"}),(0,r.jsxs)("div",{className:"flex flex-wrap colors justify-center content-center",children:[c&&c.map((function(e){return(0,r.jsx)("div",{onClick:function(){return function(e){if(e.selected)return delete e.selected,void v("unselected"+e.tokenId);c.filter((function(e){return e.selected})).length!==n?(e.selected=1,v(e.tokenId)):m.ZP.error("Max number of colors selected!")}(e)},className:"border-solid  border-4 color shadow-lg "+(e.selected?a().colorActive:" border-white"),style:{width:75,height:75,background:e.color,margin:5}},e.color)})),!c.length&&(0,r.jsx)(h.a,{})]})]}),(0,r.jsxs)("div",{className:"content-center justify-center flex mb-10",children:["spirals"!=C&&(0,r.jsx)("button",{onClick:function(){return S.apply(this,arguments)},className:"bg-green-500 mx-5 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"MINT!"}),"spirals"==C&&(0,r.jsx)("button",{className:"bg-green-500 mx-5 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Minting..."})]})]})}return(0,r.jsx)("div",{className:"flex-1 flex center-content justify-center",children:(0,r.jsx)("button",{onClick:Z,className:"inline-flex bg-green-500 items-center py-1 px-3 focus:outline-none rounded text-base",children:"Connect Wallets"})})};function y(){return(0,r.jsx)("div",{className:"relative",children:(0,r.jsxs)("div",{className:a().mainContainer,children:[(0,r.jsx)(i.w,{}),(0,r.jsx)(o.w,{}),(0,r.jsxs)("div",{className:a().container,children:[(0,r.jsx)("div",{className:a().main,children:(0,r.jsx)("main",{className:a().modal,children:(0,r.jsx)(w,{})})}),(0,r.jsx)(c.$,{})]})]})})}},11163:function(e,n,t){e.exports=t(90387)}},function(e){e.O(0,[47,93,271,774,888,179],(function(){return n=51553,e(e.s=n);var n}));var n=e.O();_N_E=n}]);