(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[687],{51553:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/mint",function(){return n(23016)}])},23016:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return w}});var a=n(85893),i=n(40108),r=n.n(i),s=n(61127),o=n(6151),u=n(55480),p=n(28520),l=n.n(p),d=JSON.parse('{"Mt":[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"approved","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":false,"internalType":"bool","name":"approved","type":"bool"}],"name":"ApprovalForAll","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[],"name":"MAX_SYNCS","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"PROVENANCE_HASH","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"THE_COLORS","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"approve","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getApproved","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getBase64TokenSVG","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"user","type":"address"}],"name":"getColorsOwnedByUser","outputs":[{"internalType":"uint256[]","name":"tokenIds","type":"uint256[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getTokenMetadata","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getTokenSVG","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"operator","type":"address"}],"name":"isApprovedForAll","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256[]","name":"tokenIdColors","type":"uint256[]"}],"name":"mintSync","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ownerOf","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"bytes","name":"_data","type":"bytes"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"bool","name":"approved","type":"bool"}],"name":"setApprovalForAll","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"provenanceHash","type":"string"}],"name":"setProvenanceHash","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"index","type":"uint256"}],"name":"tokenByIndex","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"uint256","name":"index","type":"uint256"}],"name":"tokenOfOwnerByIndex","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"tokenURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"transferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"uint256[]","name":"tokenIdColors","type":"uint256[]"}],"name":"updateColors","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"withdraw","outputs":[],"stateMutability":"nonpayable","type":"function"}]}'),c=(n(69672),n(67143)),y=n(67294),m=n(7868),f=n(66010),b=n(11163),x=n(21092);function v(e,t,n,a,i,r,s){try{var o=e[r](s),u=o.value}catch(p){return void n(p)}o.done?t(u):Promise.resolve(u).then(a,i)}function T(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var r=e.apply(t,n);function s(e){v(r,a,i,s,o,"next",e)}function o(e){v(r,a,i,s,o,"throw",e)}s(void 0)}))}}var h=function(){var e=(0,x.useWeb3Context)(),t=2,n="0x3C4CfA9540c7aeacBbB81532Eb99D5E870105CA9",i="0x2ED6550746891875A7e39d3747d1a4FFe5433289",s=(0,y.useState)(null),o=s[0],u=s[1],p=(0,y.useState)(null),v=(p[0],p[1]),h=(0,y.useState)(null),w=h[0],g=h[1],k=(0,y.useState)(null),M=(k[0],k[1],(0,y.useState)(null)),N=M[0],I=M[1],j=(0,y.useState)(null),C=j[0],P=j[1];function O(e,t,n){return S.apply(this,arguments)}function S(){return(S=T(l().mark((function t(n,a,i){var r,s,o,p,d,c;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=[],t.next=3,a.methods.balanceOf(i).call();case 3:s=t.sent,P(s),o=0;case 6:if(!(o<s)){t.next=20;break}return t.next=9,a.methods.tokenOfOwnerByIndex(i,e.library.eth.abi.encodeParameter("uint256",o)).call();case 9:return p=t.sent,t.next=12,a.methods.getTokenSVG(e.library.eth.abi.encodeParameter("uint256",p)).call();case 12:return d=t.sent,t.next=15,a.methods.getHexColor(e.library.eth.abi.encodeParameter("uint256",p)).call();case 15:c=t.sent,r.push({svg:d.replace(/"690"/g,"75","g"),tokenId:p,color:c});case 17:++o,t.next=6;break;case 20:console.log(r),u(r);case 22:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function A(){return(A=T(l().mark((function t(){var n,a,r,s,u,p;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return I("spirals"),t.prev=2,t.next=5,e.library.eth.getTransactionCount(w,"latest");case 5:return a=t.sent,r=new e.library.eth.Contract(d.Mt,i),s=o.filter((function(e){return e.selected})).map((function(e){return parseInt(e.tokenId)})),console.log(s),console.log(r.methods.mintSync(e.library.eth.abi.encodeParameter("uint256[]",s))),u={from:w,to:i,nonce:a,gas:5e5,data:r.methods.mintSync(e.library.eth.abi.encodeParameter("uint256[]",s))},console.log(u),n=f.ZP.loading("Transaction processing"),t.next=15,e.library.eth.sendTransaction(u,w).catch((function(e){f.ZP.error("Transaction failed!",{id:n}),I(void 0)}));case 15:(null===(p=t.sent)||void 0===p?void 0:p.code)?(f.ZP.error("Transaction failed!",{id:n}),I(void 0)):(f.ZP.success("Transaction successful!",{id:n}),window.localStorage.setItem("tokenId",tokenId),b.default.push("/reveal")),t.next=24;break;case 19:t.prev=19,t.t0=t.catch(2),console.log(t.t0),I(void 0),n&&f.ZP.error("Transaction failed!",{id:n});case 24:case"end":return t.stop()}}),t,null,[[2,19]])})))).apply(this,arguments)}function _(){return(_=T(l().mark((function t(){var a,i,r,s,o;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return I("colors"),t.next=3,e.library.eth.getTransactionCount(w,"latest");case 3:return a=t.sent,i=new e.library.eth.Contract(c.Mt,n),r={from:w,to:n,nonce:a,gas:5e5,data:i.methods.mintNextColors(e.library.eth.abi.encodeParameter("uint256",1)).encodeABI()},s=f.ZP.loading("Transaction processing"),t.next=9,e.library.eth.sendTransaction(r,w).catch((function(e){console.log(e),f.ZP.error("Transaction failed!",{id:s}),I(void 0)}));case 9:if(!(null===(o=t.sent)||void 0===o?void 0:o.transactionHash)){t.next=15;break}return f.ZP.success("Transaction successful!",{id:s}),I(void 0),t.next=15,O(web3,i,w);case 15:console.log(o);case 16:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return(0,y.useEffect)(T(l().mark((function t(){var a;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return v(0),u([]),t.next=4,e.setFirstValidConnector(["MetaMask"]);case 4:if(!e.active){t.next=10;break}return console.log("why"),g(e.account),a=new e.library.eth.Contract(c.Mt,n),t.next=10,O(web3,a,e.account);case 10:case"end":return t.stop()}}),t)}))),[]),e.active&&e.account?(0,a.jsxs)("div",{className:r().modal,children:[(0,a.jsxs)("div",{className:"mb-10",children:[(0,a.jsx)("p",{className:"text-center mb-3 font-bold",children:"Need a Color Primitive?"}),(0,a.jsxs)("div",{className:"flex colors justify-center content-center",children:["colors"!=N&&(0,a.jsx)("button",{onClick:function(){return _.apply(this,arguments)},className:"bg-blue-500 mx-5 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Mint a Colors NFT!"}),"colors"==N&&(0,a.jsx)("button",{className:"bg-green-500 mx-5 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Minting..."})]})]}),C>0&&(0,a.jsxs)("div",{className:"mb-10",children:[(0,a.jsx)("p",{className:"text-center mb-3 text-xl font-bold",children:"Select your Color Primitives"}),(0,a.jsxs)("div",{className:"flex flex-wrap colors justify-center content-center",children:[o&&o.map((function(e){return(0,a.jsx)("div",{onClick:function(){return function(e){if(e.selected)return delete e.selected,void v(e.tokenId);o.filter((function(e){return e.selected})).length!==t?(e.selected=1,v(e.tokenId)):f.ZP.error("Max number of colors selected!")}(e)},className:"border-solid  border-4 color shadow-lg "+(e.selected?r().colorActive:" border-white"),style:{width:75,height:75,background:e.color,margin:5}},e.color)})),!o.length&&(0,a.jsx)(m.a,{})]})]}),(0,a.jsxs)("div",{className:"content-center justify-center flex mb-10",children:["spirals"!=N&&(0,a.jsx)("button",{onClick:function(){return A.apply(this,arguments)},className:"bg-green-500 mx-5 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"MINT!"}),"spirals"==N&&(0,a.jsx)("button",{className:"bg-green-500 mx-5 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Minting..."})]})]}):(0,a.jsx)("div",{className:"flex-1 flex mb-10 center-content justify-center",children:(0,a.jsx)("button",{className:"inline-flex bg-green-500 items-center py-1 px-3 focus:outline-none rounded text-base",children:"Connect Wallet"})})};function w(){return(0,a.jsx)("div",{className:"relative",children:(0,a.jsxs)("div",{className:r().mainContainer,children:[(0,a.jsx)(u.w,{}),(0,a.jsx)(s.w,{}),(0,a.jsxs)("div",{className:r().container,children:[(0,a.jsx)("div",{className:r().main,children:(0,a.jsx)("main",{className:r().modal,children:(0,a.jsx)(h,{})})}),(0,a.jsx)(o.$,{})]})]})})}},11163:function(e,t,n){e.exports=n(90387)}},function(e){e.O(0,[47,93,774,888,179],(function(){return t=51553,e(e.s=t);var t}));var t=e.O();_N_E=t}]);